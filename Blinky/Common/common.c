/*---------------------------------------------------------------------------------------------------------*/
/*                                                                                                         */
/* Copyright(c) 2010 Nuvoton Technology Corp. All rights reserved.                                         */
/*                                                                                                         */
/*---------------------------------------------------------------------------------------------------------*/

#include <stdint.h>
#include "M051.h"
#include "Register_Bit.h"

/*en:************************************************************************************
Description:      Unlock protected register bits so that user can access them                                
****************************************************************************************/
/*中:************************************************************************************
 描述:  解锁被保护的寄存器位，以便用户可以访问它们
****************************************************************************************/
void Un_Lock_Reg(void)
{
    RegLockAddr = 0x59;
    RegLockAddr = 0x16;
    RegLockAddr = 0x88;
}

/*en:************************************************************************************
Description:      Lock protected register bits to protect system from damage due to noise                                
****************************************************************************************/
/*中:************************************************************************************
 描述:  禁止对被保护的寄存器位的访问，防止由于系统干扰引起这些位被修改，从而引起系统崩溃
****************************************************************************************/
void Lock_Reg(void)
{
    RegLockAddr = 0x00;
}

/*en:************************************************************************************
Description:      Enable PLL                                
****************************************************************************************/
/***************************************************************************************
 描述:  使能PLL功能
****************************************************************************************/
void PLL_Enable(void)
{
    PLLCON &= ~(PLL_OE|PLL_PD);
}

/*en:************************************************************************************
Description:      Enable nosie sensitivity reduction function.                                
****************************************************************************************/
/*中:************************************************************************************
 描述:  使能降低噪声的敏感度功能
****************************************************************************************/
void NSR_Enable(void) 
{
    Un_Lock_Reg();
    PORCR = 0x00005AA5;
}

/*en:************************************************************************************
Description:      Disable nosie sensitivity reduction function.                                
****************************************************************************************/
/*中:************************************************************************************
 描述:  禁用降低噪声的敏感度功能
****************************************************************************************/
void NSR_Disable(void) 
{
    Un_Lock_Reg();
    PORCR = 0x00000000;
}
